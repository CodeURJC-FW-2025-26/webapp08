<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>{{#editing}}Editar plato{{/editing}}{{^editing}}Añadir plato{{/editing}} - ZenTao</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/Style.css">
</head>
<body>
  {{> header}}

  <div class="hero-img">
    <div class="hero-overlay"></div>
    <div class="hero-text">ZenTao Buffet</div>
    <img src="/images/assets_task_01k71v35kefkh9tzb07k4pr14h_1759924941_img_1.webp" alt="ZenTao Buffet" class="img-fluid w-100">
  </div>

  <div class="container mt-4">
    <div class="row justify-content-center mt-5">
      <div class="col-12 col-md-11 col-lg-10">
        <div id="contact-card" class="contact-card">
          
          <h1 class="contact-title">{{#editing}}Editar plato{{/editing}}{{^editing}}Añadir plato{{/editing}}</h1>

          {{#errors}}
            <div class="alert alert-danger">{{msg}}</div>
          {{/errors}}
          {{#errorMessage}}
            <div class="alert alert-danger">{{errorMessage}}</div>
          {{/errorMessage}}

          <form class="newplate-form contact-form" method="POST" action="{{#editing}}/plates/{{plate._id}}?_method=PUT{{/editing}}{{^editing}}/plates{{/editing}}" enctype="multipart/form-data" validate>

            <!-- DISH TYPE -->
            <div class="mb-3">
              <label for="type" class="form-label"><strong>Tipo de plato:</strong></label>
              <select name="type" id="type" class="form-select" required>
                <option value="">Elegir</option>
                <option {{#plate.type}} {{/plate.type}}>Entrante</option>
                <option>Principal</option>
                <option>Sushi</option>
                <option>Postres</option>
                <option>Bebida</option>
              </select>
            </div>

            <!-- TITLE -->
            <div class="mb-3">
              <label for="title" class="form-label"><strong>Nombre:</strong></label>
              <input 
                type="text" 
                name="title" 
                id="title" 
                class="form-control"
                placeholder="Introduzca el nombre del plato"
                value="{{plate.title}}"
                required
                minlength="3"
                maxlength="30"
                pattern="^[A-ZÁÉÍÓÚÑ][A-Za-zÁÉÍÓÚÜÑ0-9\s,.'-]{2,79}$"
              >
            </div>

            <!-- DESCRIPTION -->
            <div class="mb-3">
              <label for="description" class="form-label">Descripción:</label>
              <textarea 
                name="description" 
                id="description" 
                class="form-control" 
                rows="3"
                required
                minlength="20"
                maxlength="200"
              >{{plate.description}}</textarea>
            </div>

            <!-- PRICE -->
            <div class="mb-3">
              <label for="price" class="form-label"><strong>Precio (euros):</strong></label>
              <input 
                type="number" 
                step="0.01" 
                min="1" 
                max="100"
                name="price" 
                id="price" 
                class="form-control"
                value="{{plate.price}}"
                required
              >
            </div>

            <!-- PREPARATION TIME -->
            <div class="mb-3">
              <label for="duration" class="form-label"><strong>Tiempo de preparación (minutos):</strong></label>
              <input 
                type="number" 
                step="1" 
                min="1" 
                max="60"
                name="duration" 
                id="duration" 
                class="form-control"
                value="{{plate.duration}}"
                required
              >
            </div>

            <!-- ALLERGENS -->
            <div class="mb-3">
              <label class="form-label"><strong>Alérgenos:</strong></label>
              {{#allergenOptions}}
              <div class="form-checkbox">
                <input type="checkbox" name="allergens" value="{{.}}" {{#plate.allergens}} {{/plate.allergens}}> 
                <label>{{.}}</label>
              </div>
              {{/allergenOptions}}
            </div>

            <!-- IMAGE -->
            <div class="mb-3">
              <label for="plateImage" class="form-label"><strong>Imagen del plato:</strong></label>
              <input 
                type="file" 
                name="plateImage" 
                id="plateImage" 
                class="form-control"
                required
                {{^editing}}required{{/editing}}
              >
              {{#plate.images}}
              <div class="mt-2">
                <img src="{{.}}" alt="preview" style="max-width:120px;">
              </div>
              {{/plate.images}}
            </div>

            <!-- BUTTONS -->
            <div class="text-end">
              <button type="submit" class="btn btn-create">
                {{#editing}}Guardar cambios{{/editing}}
                {{^editing}}Añadir{{/editing}}
              </button>

              <a href="/"><button type="button" class="btn btn-create">Cancelar</button></a>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>

  {{> footer}}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
